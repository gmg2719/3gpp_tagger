dual connectivity involves two ran nodes, i.e. master and secondary ran nodes (see ts 36.300 [5] for the definitions), in providing radio resources to a given UE (with active radio bearers), while a single s1-mme termination point exists for an ue between a MME and the e-utran. the E-UTRAN architecture and related functions to support dual connectivity with e-utran is further described in ts 36.300 [5]. dual connectivity with e-utran as master ran node and nr as secondary ran node is further described in ts 37.340 [85].
dual connectivity defines "master cell group (mcg) bearer" and "secondary cell group (scg) bearer" alternatives (see ts 36.300 [5]). for e-rabs configured as "mcg bearers" the u-plane termination points are maintained, whereas for e-rabs configured as "scg bearers" it enables changing the u-plane termination point in the E-UTRAN by means of s1-mme signalling without changing the s1-mme termination point.
dual connectivity also defines a "split bearer" alternative ts 36.300 [5]. the "split bearer" in the E-UTRAN is transparent to the core network entities (e.g. mme, s-gw etc.) with the exception of the csg membership verification by the MME when the secondary E-UTRAN is a hybrid access enb.
the E-UTRAN uses the per-ue information supplied by the MME and local e-utran configuration data to determine whether or not to use dual connectivity for that ue, and, on a per eps bearer basis the e-utran decides whether to use an mcg bearer or scg bearer, and, whether or not that bearer is a "split bearer".
note 1: typically, the MME and sgw cannot determine whether the ran termination point(s) for the s1-u interface are located on a master ran node that has multiple ip addresses, or, on a secondary ran node.
if the MME has an access restriction for nr for a UE (either signalled from the hss, or, locally generated by vplmn policy in the mme) then the mme shall signal this to the E-UTRAN as part of handover restriction list and to the ue in attach and tau accept as defined in clauses 5.3.2.1, 5.5.2.2.3, 5.5.2.4.3 and d.3.6 respectively.
an E-UTRAN supporting dual connectivity with nr checks whether the UE is allowed to use nr. if the ue is not allowed to use nr, the enb shall not establish dual connectivity with nr as a secondary rat.
the MME uses "ue support for dual connectivity with nr" for sgw and pgw selection when the UE indicates support for nr and there is no access restriction for nr for the ue.
an E-UTRAN cell, based on operator configuration, broadcasts whether it is capable of supporting dual connectivity with locally available nr secondary cell(s).
at inter-rat handover from geran/utran, the access restriction for nr is either already in the mme's UE context, or, is obtained from the hss during the subsequent tracking area update procedure (i.e. not from the source sgsn or source ran). in both inter-rat handover cases, any nr access restriction is then signalled to the e-utran.
note 2: this signalling of the access restriction during the tau after the inter-rat handover procedure means that there is a small risk that nr resources are transiently allocated.
the enb, at which the s1-mme terminates, performs all necessary s1-mme related functions (as specified for any serving enb) such as mobility management, relaying of nas signalling, e-rab handling, etc. and manages the handling of user plane connection of s1-u.
additional functional characteristics are:
- user location information reporting is based on the identity of the cell that is serving the UE and supported by the E-UTRAN terminating s1-mme.
- path update signalling for e-rabs configured as "scg bearers" and serving gw relocation cannot occur at the same time.
- during handover with dual connectivity, the requirement of forwarding "end marker" packets to target node is also applicable to secondary ran node if it is the source node for s1-u bearer.
- after handover with data forwarding, the E-UTRAN initiated e-rab modification procedure of clause 5.4.7 should not be initiated by the target E-UTRAN before "end marker" packet is received at the target ran node or a timer in target enb expires.
- relaying function is not supported.
- csg function may be supported in case the secondary E-UTRAN is a hybrid access enb (see more details in clause 5.4.7 and in ts 36.300 [5]).
note 3: a E-UTRAN cannot be the master enb, i.e. a henb cannot initiate the secondary E-UTRAN addition procedure.
note 4: a E-UTRAN is not allowed to be the secondary E-UTRAN if the henb is a closed access enb.
- when the secondary E-UTRAN is a hybrid access enb, the master E-UTRAN may ask csg membership verification to the MME using e-rab modification indication message (for scg bearers) or UE context modification indication (for split bearers) message. the mme shall determine the csg membership based on the csg membership information as specified in ts 36.300 [5] and shall respond to the master enodeb using respectively a e-rab modification confirm or a ue context modification confirm, but shall not update the user csg information in the core network.
- the lipa function may be supported for the scg bearer alternative, in the case that the secondary E-UTRAN is a E-UTRAN with a collocated l-gw (see more details in ts 36.300 [5]).
- "sipto at the local network with l-gw function collocated with the (h)enb" function may be supported (see more details in ts 36.300 [5]):
- for the mcg and split bearer alternatives, in case the master E-UTRAN is collocated with a l-gw; and/or
- for the scg bearer alternative, in case the secondary E-UTRAN is a (h)enb with a collocated l-gw.
note 5: lipa or sipto at the local network pdn connection can be established if the senb has already been added before the UE requests establishment of the lipa or sipto at the local network pdn connection.
note 6: lipa or sipto at the local network pdn connection can be established if the UE is in the coverage of the candidate senb when the ue requests establishment of the lipa or sipto at the local network pdn connection, but the senb has not yet been added. in this case, there is a time gap between the moment when the pdn connection establishment is completed and the moment when the senb addition procedure is completed.
- "sipto at the local network with stand-alone gw" function may be supported for the mcg, scg, and split bearer alternatives if the master and secondary enbs belong to the same lhn (see more detail in ts 36.300 [5]).
4.3.3 packet routing and transfer functions
4.3.3.1 general
a route is an ordered list of nodes used for the transfer of packets within and between the plmn(s). each route consists of the originating node, zero or more relay nodes and the destination node. routing is the process of determining and using, in accordance with a set of rules, the route for transmission of a message within and between the plmn(s).
the eps is an ip network and uses the standard routing and transport mechanisms of the underlying ip network.
the maximum transfer unit (mtu) size considerations in clause 9.3 of ts 23.060 [7] are also applicable to eps.
4.3.3.2 ip header compression function
the ip header compression function optimises use of radio capacity by ip header compression mechanisms.
when control plane ciot eps optimisation is supported for pdn connections of ip pdn type, if the ip header compression based on rohc framework ietf rfc 5795 [77] is implemented in the MME and the ue, the rohc profiles defined in ts 36.323 [78] may be supported.
4.3.3.3 packet screening function
the packet screening function provides the network with the capability to check that the UE is using the exact ipv4-address and/or ipv6-prefix that was assigned to the ue.
4.3.3.4 ip multicast forwarding between a network accessed by lipa and a UE
the home E-UTRAN l-gw should support ip forwarding of packets to multicast groups between the UE and the network accessed by lipa.
4.3.4 security functions
the security functions are described in clause 5.3.10.
4.3.5 mobility management functions
4.3.5.1 general
the mobility management functions are used to keep track of the current location of a ue.
intra-rat mobility for nb-iot ues is supported.
inter-rat idle mode mobility between nb-iot and wb-eutran/utran/geran is supported. tracking area list management as defined in clause 4.3.5.3 is required to ensure that at inter-rat mobility, the UE performs a tau or rau procedure.
4.3.5.2 reachability management for UE in ecm-idle state
the location of a UE in ecm-idle state is known by the network on a tracking area list granularity. all cells of the tracking areas in which a ue in ecm-idle is currently registered needs to be taken into account for paging. the ue may be registered in multiple tracking areas. all the tracking areas in a tracking area list to which a ue is registered are served by the same serving mme.
an emm-registered UE performs periodic tracking area updates with the network after the expiry of the periodic tau timer.
the MME may allocate long periodic tau timer value to the UE according to clause 4.3.17.3.
if the UE is out of E-UTRAN coverage (including the cases when the ue is camped on geran/utran cells) when its periodic tau timer expires, the ue shall:
- if isr is activated, start the E-UTRAN deactivate isr timer. after the e-utran deactivate isr timer expires the UE shall deactivate isr by setting its tin to "p-tmsi".
- if isr is activated and the UE is camping on a geran/utran cell (or returns to coverage in geran/utran) and the ue is eps/imsi attached, perform a lau procedure in nmo ii or a combined ra/la update procedure in nmo i.
- when emm-registered, perform a tracking area update when it next returns to e utran coverage.
if the UE is camped on an e utran cell or is in ecm connected state when the ue's periodic rau timer expires, the ue shall:
- if isr is activated, start the geran/utran deactivate isr timer. after the geran/utran deactivate isr timer expires the UE shall deactivate isr by setting its tin to "guti".
- perform a routing area update when it next returns to geran/utran coverage.
if the UE is eps attached only and either camps on an e utran cell or is in ecm connected state when the ue's periodic lau timer expires, the ue shall perform a location area update procedure in nmo ii or combined ra/la update in nmo i when it next returns to geran/utran coverage.
the E-UTRAN deactivate isr timer is stopped when the UE performs a successful tracking area update or combined ta/la update; and the geran/utran deactivate isr timer is stopped when the ue performs a successful routing area update or combined ra/la update.
expiry of the periodic tau timer, or, the periodic rau timer, or, the periodic lau timer shall not cause the UE to change rat.
the ue's periodic tau timer is restarted from its initial value whenever the UE enters ecm idle mode and when the ue leaves the e utran connection due to handover to geran/utran. utran rrc state transitions and geran gprs standby/ready state transitions shall have no other impact on the periodic tau timer.
e utran rrc state transitions shall have no impact on the periodic rau timer or periodic lau timer except that handover from geran/utran to e utran shall cause the periodic rau timer to be started from its initial value.
handover from e utran to utran/geran shall cause the periodic tau timer to be started from its initial value.
typically, the MME runs a mobile reachable timer. whenever the UE enters ecm idle mode the timer is started with a value similar to the ue's periodic tau timer. if this timer expires in the mme, the mme can deduce that the ue is not reachable. however, the mme does not know for how long the ue is not reachable, so, the mme shall not immediately delete the ue's bearers. instead the mme should clear the ppf flag in the mme and start an implicit detach timer, with a relatively large value and if isr is activated, at least slightly larger than the ue's E-UTRAN deactivate isr timer.
if MME has allocated an active time to the ue, then the mme starts the active timer with the value of active time whenever the UE enters ecm idle mode. if this timer expires in the mme, the mme can deduce that the ue is not reachable and should clear the ppf flag in the mme.
with the ppf clear, the MME does not page the UE in e utran coverage and shall send a downlink data notification reject message to the serving gw when receiving a downlink data notification message from the serving gw. if the implicit detach timer expires before the ue contacts the network, then the mme can deduce that the ue has been 'out of coverage' for a long period of time and implicitly detach the ue as described in clause 5.3.8.3 "mme-initiated detach procedure".
if the MME is requested to monitor reachability for data and the UE enters ecm-connected, the mme sends a monitoring report message to the address that was indicated in the related monitoring request as described in ts 23.682 [74].
when the MME applies general nas level mobility management congestion control to a ue, the mme may need to adjust the mobile reachable timer and/or implicit detach timer (as clause 4.3.7.4.2.4).
note 1: the sgsn has similar functionality as the mme.
note 2: alternative MME implementations are permitted, however, the externally visible mme behaviour should conform to the above description.
4.3.5.3 tracking area list management
tracking area list management comprises the functions to allocate and reallocate a tracking area identity list to the ue. all the tracking areas in a tracking area list to which a UE is registered are served by the same serving mme.
the "tracking area list concept" is used with e-utran. with this concept, when the UE registers with the network, the MME allocates a set (a "list") of tracking areas to the ue. by making the centre of this set of tracking areas close to the ue's current location, the chance of a ue rapidly making another tracking area update can be reduced.
if sipto at local network with stand-alone gw, serving gw relocation without mobility and isr are supported in the core network the tracking area list should only contain either tracking areas inside one local network or inside the macro network. if the tracking area list covers both local network and macro network, the isr shall not be activated if the UE is allowed to use sipto at local network.
the MME determines the rat type the UE is camping on, i.e. nb-iot or wb-e-utran, based on the tracking area indicated in the initial ue message by the enb.
to ensure a UE initiates tracking area updating procedure when perfoming inter-rat mobility between nb-iot and wb-e-utran, the E-UTRAN shall be configured such that a tracking area does not contain both wb-e-utran and nb-iot cells, and, the MME shall not allocate a tracking area identity list that contains both nb-iot and wb-e-utran tracking areas.
to ensure the UE initiates tracking area update procedure when it moves to and from an MME that supports 15 eps bearers per ue as defined in clause 4.12 to an mme that does not support 15 eps bearers per mme and vice versa, the mme shall allocate a tracking area identity list that provides homogenous support for 15 eps bearers per ue.
other features (e.g. user plane ciot eps optimisation, supporting up to 15 eps bearers per ue) may require the MME to adapt how it creates the "list" of tais.
